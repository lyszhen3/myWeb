# 限流算法
https://z.itpub.net/article/detail/B049B6F216829EDD0827E97BC1AA9100

## 固定窗口限流
首先维护一个计数器，将单位时间段当做一个窗口，计数器记录这个窗口接收请求的次数。

* 当次数少于限流阀值，就允许访问，并且计数器+1
* 当次数大于限流阀值，就拒绝访问。
* 当前的时间窗口过去之后，计数器清零。

假设单位时间是1秒，限流阀值为3。在单位时间1秒内，每来一个请求,计数器就加1，如果计数器累加的次数超过限流阀值3,  
后续的请求全部拒绝。等到1s结束后，计数器清0，重新开始计数。如下图：
![img](/img/固定窗口.jpg)

临界问题:  
假设限流阀值为5个请求，单位时间窗口是1s,如果我们在单位时间内的前0.8-1s和1-1.2s，分别并发5个请求。  
虽然都没有超过阀值，但是如果算0.8-1.2s,则并发数高达10，已经超过单位时间1s不超过5阀值的定义啦


![img](/img/固定窗口2.jpg)


## 滑动窗口限流



## 漏桶算法

## 令牌桶算法